# XSS Vulnerability Fix Summary

## Vulnerabilities Identified

Two Cross-Site Scripting (XSS) vulnerabilities were found in the AEM Live tools:

1. **RUM Explorer** (`/tools/rum/explorer.html`): XSS via the `filter` parameter
2. **Oversight Explorer** (`/tools/oversight/explorer.html`): XSS via the `filter` parameter  

The vulnerabilities occurred because user-supplied URL parameters were directly assigned to input element values without proper sanitization, allowing malicious JavaScript to be executed.

## Attack Vector

Example malicious URL:
```
https://www.aem.live/tools/rum/explorer.html?filter="><img src=x onerror=alert(5)>
```

The unsanitized filter parameter would be directly inserted into the input field's value attribute, causing the browser to parse and execute the injected JavaScript.

## Fix Applied

### Files Modified:
1. `/root/repo/tools/rum/slicer.js` (line 368-372)
2. `/root/repo/tools/oversight/slicer.js` (line 436-440)

### Sanitization Code Added:
```javascript
// Sanitize filter parameter to prevent XSS
const filterValue = params.get('filter') || '';
// Remove any HTML tags and dangerous characters that could cause XSS
const sanitizedFilter = filterValue.replace(/[<>"']/g, '');
elems.filterInput.value = sanitizedFilter;
```

## How the Fix Works

The fix sanitizes the `filter` parameter by removing all characters that could be used to break out of the HTML context and inject malicious code:
- `<` and `>` - Prevented HTML tag injection
- `"` and `'` - Prevented attribute breakout

This ensures that any XSS payload attempt will have its dangerous characters stripped before being inserted into the DOM.

## Verification

The fix has been tested with various XSS payloads including:
- `"><img src=x onerror=alert(5)>`
- `"><script>alert(1)</script>`
- `' onmouseover='alert(1)'`
- `<svg onload=alert(1)>`

All payloads are now properly sanitized and cannot execute.

## Additional Notes

- The domain parameter in `url-selector.js` already had proper sanitization in place
- The code changes pass ESLint validation
- The fix maintains functionality while preventing XSS attacks